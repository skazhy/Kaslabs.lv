{% extends "base-adm.html" %}
{% block header %}
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">
</script>
<script type="text/javascript">
$(document).ready( function () {
	var selectValue = $('select option:selected').attr('value');
	var block = $(form).siblings('#venueBlock');
	if (selectValue != 'createNew')  {
		$("#venueBlock").css("display","none");
	}
	$("#venueKey").change( function() { addVenue(this); });
});

function addVenue(form) {
	var selectValue = $('select option:selected').attr('value');
	var block = $(form).siblings('#venueBlock');
	if (selectValue == 'createNew') $(block).css('display','block');
	else $(block).css('display','none');
};
</script>

{% endblock %}
{% block adm-content %}
	<form action="/admin/store_new" method="post" accept-charset="utf-8">
			<p>Title: </p><input type=text" name="eventTitle" value="" />
			<p>Venue: </p>
			<select name="venueKey" id="venueKey">
			{% for venue in venues %}
				<option value="{{ venue.key }}">{{ venue.title }}</option>
			{% endfor %}
				<option value="createNew">Izveidot jaunu...</option>
			</select>
			<p>Event info: </p>
			<textarea name="eventInfo" rows="8" cols="40"></textarea><br />
			<span>Year:</span><input type="text" name="eventY" />
			<span>Month:</span><input type="text" name="eventM" />
			<span>Day:</span><input type="text" name="eventD" />
		<div id="venueBlock">
			<span>Venue title: </span><input type=text" name="venueTitle" value="" />
			<span>Venue city: </span><input type=text" name="venueCity" value="" />
			<span>Venue address: </span>
			<div><textarea name="venueAddress"></textarea>
			<span>Venue Webpage: </span><input type=text" name="venueWeb" value="" />
		</div>
	<p><input type="submit" value="Add event" /></p>
	</form>
{% endblock %}
